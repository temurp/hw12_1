# hw12_1
Final homework for the DevOps course [Ansible, Easy]

Финальное задание заключается в том, чтобы найти старые лог-файлы
на сервере и удалить их.

Задание реализовано двумя разными плейбуками. Чтобы запустить их у себя,
необходимо в hosts.ini прописать данные к своим серверам: публичный ip-адрес,
имя пользователя, путь до ssh-private-key. Файл hosts.ini снабжен соответствующими
комментариями.

Плейбук №1 - purge_logs.yml

Этот плейбук выполняет два задания - одно находит все файлы, старше 
N дней по заданному пути на удаленном сервере. Второе задание - удаляет эти файлы на удаленном сервере.
Для выполнения этого плейбука надо задать значения двум переменным (vars): age и path. 
Переменная age принимает число, обозначающее возраст файлов, которые необходимо удалить. 
Переменная path - это путь до лог-файлов на удаленном сервере.


Плейбук №2 - copy_and_purge_logs.yml

Этот плейбук выполняет три задания - находит файлы, старше N дней на удаленном сервере, затем копирует их
на локальную машину в папку с именем удаленного сервера (папка создается автоматически) и наконец 
удаляет эти файлы с удаленного сервера.
Для выполнения этого плейбука надо задать значения трем переменным (vars): age, path_to_logs и local_log_storage.
Переменная age принимает число, обозначающее возраст файлов, которые необходимо удалить. 
Переменная path_to_logs - это путь до лог-файлов на удаленном сервере. 
Переменная local_log_storage - это путь до папки на локальном сервере, где будут храниться логи. Логи с каждого отдельного сервера
будут храниться в своей папке - она будет создаваться автоматически.


Оба плейбука подробно снабжены комментариями.

Как запускать плейбуки:

ansible-playbook -i hosts.ini purge_logs.yml

ansible-playbook -i hosts.ini copy_and_purge_logs.yml
